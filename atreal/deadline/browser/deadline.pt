<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:i18n="http://xml.zope.org/namespaces/i18n"
     xmlns:tal="http://xml.zope.org/namespaces/tal"
     class="deadline"
     id="content-deadline"
     i18n:domain="atreal.deadline"
     tal:define="canModify view/canModify;
                 hasDeadline view/hasDeadline;
                 hasComment view/hasComment"
     tal:condition="python:True">
  

  <style type="text/css" media="all"
          tal:content="string:@import url(${here/jscalendar/calendar-system.css});"/>
  <!--<script type="text/javascript"-->
  <!--        tal:attributes="src string:${view/site_url}/jscalendar/calendar_stripped.js" />-->
  <!--<script type="text/javascript" charset="iso-8859-1"-->
  <!--        tal:attributes="src string:${view/site_url}/jscalendar/calendar-en.js" />-->
  <!--<script type="text/javascript"-->
  <!--        tal:content="string:@import url(${here/jscalendar/calendar_stripped.js});" />-->
  <!--<script type="text/javascript" charset="iso-8859-1"-->
  <!--        tal:condition="exists: portal/jscalendar/calendar-en.js"-->
  <!--        tal:content="string:@import url(${here/jscalendar/calendar-en.js});" />-->

  <div id="deadline-display">
    <span tal:condition="not:hasDeadline">Deadline</span>
    <span class="action dl-add" i18n:translate="add"
          tal:condition="not:hasDeadline"
          title="Add">
    </span>
    <span tal:condition="hasDeadline" class="action dl-modify" i18n:translate="modify" title="Modify"></span>
    <span tal:condition="hasDeadline" class="action dl-history" i18n:translate="close" title="History"></span>
    <span tal:condition="hasDeadline" class="action dl-delete" i18n:translate="delete" title="delete"></span>
    <span class="dl-date"
          tal:condition="hasDeadline"
          tal:content="string:19/01/2010 Ã  18h30"></span>
    <img tal:condition="hasComment" tal:attributes="src string:${here/absolute_url}/arrowRight.gif"/>
    <span class="dl-comment"
          tal:condition="hasComment"
          tal:content="view/getComment"></span>
    
  </div>
  <!---->
  <!--<div class="actions"-->
  <!--     tal:condition="python:True">-->
  <!--  <ul>-->
  <!--    <li>-->
  <!--      <a class="modify" i18n:translate="modify">Modify</a>-->
  <!--    </li>-->
  <!--  </ul>-->
  <!--</div>-->
  <!--  -->
  <div id="deadline-form" style="display:none;">
    <form method="POST" 
          tal:attributes="action string:${here/absolute_url}/@@deadline_provider/submitDeadlineForm"
          tal:define="uniqueItemIndex view/uniqueItemIndex">
      <div class="field"
           tal:define="inputname  string:Deadline;
                       formname   string:deadline_form;
                       inputvalue view/getDeadline;">
        <label for="Deadline">New deadline</label> :
        <span metal:use-macro="here/calendar_macros/macros/calendarDatePickerBox" />
      </div>
    
      <div class="field">
        <label for="comment" 
               i18n:translate="label_comments">Comments</label>
        <br/>
        <textarea id="comment"
                  name="comment"
                  cols="60"
                  rows="3"
                  tal:content="request/comment|nothing">
        </textarea>
      </div>      
      <!--<div class="field">-->
      <!--  <label for="Responsible">Responsible</label>-->
      <!--  <div>-->
      <!--    <select name="Responsible" id="Responsible" tal:define="responsible here/@@deadline_provider/getResponsible">-->
      <!--      <tal:users repeat="user here/@@deadline_provider/getPossibleResponsible">-->
      <!--        <option tal:content="user/fullname"-->
      <!--                tal:attributes="value user/id; selected python:responsible==user['id']" />-->
      <!--      </tal:users>-->
      <!--    </select>-->
      <!--  </div>-->
      <!--</div>-->
  
      <input class="standalone" type="reset" value="Reset" />
      <input class="standalone" type="submit" value="Save" />
      <br/>

    </form>
  </div>
  
  <div tal:condition="hasDeadline" id="deadline-history" style="display:none">
    <table class="listing sort" summary="Deadline history">
      <tr>
        <th collspan="2" i18n:translate="history">History</th>
      </tr>
      <tr>
        <th i18n:translate="deadlines">Deadlines</th>
        <th i18n:translate="comments">Comments</th>            
      </tr>
      <!--<td/>-->
    </table>
  </div>
  
</div>
